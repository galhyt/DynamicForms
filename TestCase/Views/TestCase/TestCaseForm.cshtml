@model TestCase.Models.TestCaseModel
@using EnviRepository.HtmlHelpers
@{
    Layout = null;
}
<!DOCTYPE html>

<html>
<head>
    <title>TemplateWrraper</title>
    <link href="~/DynamicForms/Css/DynamicForms.css" rel="stylesheet" type="text/css" />
    <link href="~/DynamicForms/Css/dialog.css" rel="stylesheet" type="text/css" />
    <script src="~/DynamicForms/Js/ThirdParty/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="~/DynamicForms/Js/ThirdParty/handlebars-v2.0.0.js" type="text/javascript"></script>
    <script src="~/DynamicForms/Js/ThirdParty/DynamicForms.js" type="text/javascript"></script>
    <script src="~/DynamicForms/Js/ThirdParty/jquery.fancybox-1.3.4.pack.js")" type="text/javascript"></script>
    <link href="~/DynamicForms/Css/ThirdParty/jquery.fancybox-1.3.4.css")" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        $(document).ready(function () {
            TemplateWrraper.init([], null, function () {
                $('[type="checkbox"]').click(function () {
                    $(this).val($(this).is(':checked') ? "True" : 'False');
                });
            });
            @if (ViewBag.readOnly) {
                @:$('[type="checkbox"],[type="text"],[type="number"],textarea').attr('disabled', 'disabled');
            }

            @if (Request.QueryString["print"] == "1") {
                @Html.Raw("$('#print').click(function() { print(); });");
            }
            else {
                @Html.Raw("$('#print').fancybox({'width': '95%','height': '95%','autoScale': true,'hideOnContentClick': false,'href': '/Template/TemplateWrraper/?ID=' + parent.document.getElementById('ID').value + '&ViewName=Event/TemplateDynamicEventForm&print=1','callbackOnShow': function () { },'type': 'iframe'});");
            }
            
        });
    </script>
    <style media="print">
        body > form > div:last-of-type {
            display:none;
        }
    </style>
</head>
<body>
    @using (Html.BeginForm("TestCaseForm", "TestCase", FormMethod.Post, new { @id = "form" }))
    {
    @Html.Hidden("PartialView")
    <input type="hidden" id="readOnly" value="@ViewBag.readOnly" />
    <div id="ReportContainer">

    <div class="TemplateDynamicFormContainer">
        <h1><strong>@Model.FormTitle</strong></h1>
            @Html.HiddenFor(m => m.FormTitle)
        <div style="float:left; margin-left: 1em;">
            @Html.HiddenFor(m => m.Date)
            @Html.LabelForModel(Model.Date)
        </div>
        <div></div>
        <div style="float:right;margin-bottom:50px;width:100%;text-align:right;">
             @Html.HiddenFor(m => m.Editor_Name)
            <b>Filled by:</b> @Html.LabelForModel(Model.Editor_Name)
        </div>
        @Html.Partial("_TemplateDynamicContent")
        
    </div>
    </div>
    <div></div>
    <div style="float:left;">
    @{if (Request.QueryString["print"] != "1")
      {
        <input type="button" value="Save" id="Save" style="@(ViewBag.readOnly ? "display:none" : "")" />
      }
    }
    <input type="button" value="Cancel" onclick="parent.$.fancybox.close();"  />
    <input type="button" value="Print" id="print" />
    </div>
    }
    <span class="status-label" style="float:right">@ViewBag.Status</span>
</body>
</html>
